### API: compose.mk

#### API: compose.mk: (Autogenerated Targets)

The autogenerated section of the API (i.e. what's created by `compose.import`) is documented as part of the [Make/Compose Bridge](#makecompose-bridge).

#### API: (Static Targets)

This is the complete list of namespaces & targets available from compose.mk, along with their documentation.  Most documentation is pulled automatically from [the latest source](compose.mk).

Some important notes about how these targets work:

**No requirements for `k8s-tools.yml` or `k8s.mk`.**

**Most targets are pure shell, and have no exotic dependencies.** That means that they generally run fine on host or as dispatched targets inside containers.  Be mindful of these exceptions though:  targets in `stream.json.*` require `jq` and targets in `docker.*` require docker.
    
**Targets are usable interactively from your shell** as `make <target>` or `./compse.mk <target>`

**Targets are usable as an API,** either as prereq-targets or as part of the body in your targets.

Target names are reserved names after declaration, but collisions aren't likely because things are organized into a few namespaces:

* [*`io.*`*](#api-io) targets: Misc text-formatters, timers, and other utilities
* [*`docker.*`]*(#api-docker) targets: Simple helpers for working with docker.
* [*`flux.*`]*(#api-flux) targets: Miniature workflow library / pipe wizard.
* [*`tux.*`]*(#api-tux) targets: Embedded TUI support.
* [*`stream.*`]*(#api-stream) targets: Support for IO streams, including basic stuff with JSON, newline-delimited, and space-delimited formats.

#### API: tux

The *`tux.*`* targets allow for creation and automation of an embedded TUI interface.

*This documentation is pulled automatically from [source](compose.mk)*

#### API: io

The *`io.*`* targets cover various I/O helpers, text-formatters, and other utilities.

*This documentation is pulled automatically from [source](compose.mk)*

{% set targets=bash('pynchon makefile parse compose.mk| jq \'with_entries(select(.key | startswith("io")))\'', load_json=True) %}
{% for tname in targets %}
#### **`{{tname.replace('%','<arg>')}}`**

```bash 
{{ "\n".join(targets[tname].docs).strip()}}
```
{% endfor %}

#### API: docker

The *`docker.*`* targets cover a few helpers for working with docker.

*This documentation is pulled automatically from [source](compose.mk)*

{% set targets=bash('pynchon makefile parse compose.mk| jq \'with_entries(select(.key | startswith("docker")))\'', load_json=True) %}
{% for tname in targets %}
#### **`{{tname.replace('%','<arg>')}}`**

```bash 
{{ "\n".join(targets[tname].docs).strip()}}
```
{% endfor %}

#### API: flux

The *`flux.*`* targets describe a miniature workflow library.  

Combining `flux` with [container dispatch](#container-dispatch) is similar in spirit to things like [declarative pipelines in Jenkins](https://www.jenkins.io/doc/book/pipeline/syntax/#declarative-pipeline), but simpler, more portable, and significantly easier to use.  

Most of these targets perform split/join/loop/map operations *over other make targets*.  For stuff specific to shell code, see`flux.sh.*`, and for scripts see `flux.scripts.*`.

See the [Platform Setup](#example-platform-setup) example for a more complete walk-through of motivation/use-case.

{#:

We've [seen previously](##target-svc_nameshellpipe) that `compose.mk` already makes piping data between tool containers really simple.  

```bash 
$ echo echo echo hello-world | make alpine/pipe | make debian/pipe
▰ // docker-compose // alpine container
▰ [default entrypoint] ⋘⋘⋘  echo echo hello-world
▰ // docker-compose // debian container
▰ [default entrypoint] ⋘⋘⋘  echo hello-world
hello-world
```

#}
*This documentation is pulled automatically from [source](compose.mk)*

{% set targets=bash('pynchon makefile parse compose.mk| jq \'with_entries(select(.key | startswith("flux")))\'', load_json=True) %}
{% for tname in targets %}
#### **`{{tname.replace('%','<arg>')}}`**

```bash 
{{ "\n".join(targets[tname].docs).strip()}}
```
{% endfor %}


#### API: compose.mk: stream

The `stream.*` targets support IO streams, including basic stuff with JSON, newline-delimited, and space-delimited formats.

*This documentation is pulled automatically from [source](compose.mk)*

{% set targets=bash('pynchon makefile parse compose.mk| jq \'with_entries(select(.key | startswith("stream")))\'', load_json=True) %}
{% for tname in targets %}
#### **`{{tname.replace('%','<arg>')}}`**

```bash 
{{ "\n".join(targets[tname].docs).strip()}}
```
{% endfor %}
